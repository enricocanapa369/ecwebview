<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Frogger Clone</title>
  <style>
    body {
      margin: 0;
      background: #111;
      color: white;
      font-family: sans-serif;
      overflow: hidden;
    }
    canvas {
      background: #222;
      display: block;
      margin: auto;
      margin-top: 10px;
    }
    #controls {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }
    .btn {
      width: 60px;
      height: 60px;
      font-size: 24px;
      border: none;
      border-radius: 10px;
      background: #fff;
      color: #333;
    }
    #errorBox {
      position: fixed;
      bottom: 0;
      right: 0;
      width: 100%;
      max-height: 40%;
      overflow-y: auto;
      background: rgba(0, 0, 0, 0.85);
      color: red;
      font-size: 12px;
      display: none;
      padding: 10px;
      box-sizing: border-box;
      white-space: pre-wrap;
      z-index: 10;
    }
    #toggleErrors {
      position: fixed;
      bottom: 10px;
      right: 10px;
      z-index: 11;
      font-size: 12px;
      padding: 5px 10px;
      background: white;
      color: black;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <canvas id="game" width="300" height="400"></canvas>

  <div id="controls">
    <button class="btn" onclick="move('up')">⬆️</button>
    <button class="btn" onclick="move('left')">⬅️</button>
    <button class="btn" onclick="move('right')">➡️</button>
    <button class="btn" onclick="move('down')">⬇️</button>
  </div>

  <button id="toggleErrors" onclick="toggleErrorBox()">Show Errors</button>
  <div id="errorBox"></div>

  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');

    let player = { x: 140, y: 360, size: 20 };
    let cars = Array.from({ length: 5 }, (_, i) => ({
      x: Math.random() * 300,
      y: i * 60 + 40,
      w: 40,
      h: 20,
      speed: 2 + Math.random() * 2
    }));

    function move(dir) {
      const s = 20;
      if (dir === 'up') player.y -= s;
      if (dir === 'down') player.y += s;
      if (dir === 'left') player.x -= s;
      if (dir === 'right') player.x += s;
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = 'lime';
      ctx.fillRect(player.x, player.y, player.size, player.size);

      ctx.fillStyle = 'red';
      for (let car of cars) {
        car.x += car.speed;
        if (car.x > canvas.width) car.x = -car.w;
        ctx.fillRect(car.x, car.y, car.w, car.h);

        if (
          player.x < car.x + car.w &&
          player.x + player.size > car.x &&
          player.y < car.y + car.h &&
          player.y + player.size > car.y
        ) {
          player.y = 360; // Reset position
        }
      }

      requestAnimationFrame(draw);
    }

    draw();

    // Error capture
    let errorLogs = [];
    const errorBox = document.getElementById('errorBox');

    function logError(msg) {
      errorLogs.push(msg);
      if (errorBox.style.display !== 'none') {
        errorBox.textContent = errorLogs.join('\n');
      }
    }

    window.onerror = function (msg, url, lineNo, columnNo, error) {
      logError(`[${lineNo}:${columnNo}] ${msg}`);
    };

    const originalConsoleError = console.error;
    console.error = function (...args) {
      logError(args.join(' '));
      originalConsoleError.apply(console, args);
    };

    function toggleErrorBox() {
      if (errorBox.style.display === 'none') {
        errorBox.style.display = 'block';
        errorBox.textContent = errorLogs.join('\n') || 'No errors';
        document.getElementById('toggleErrors').textContent = 'Hide Errors';
      } else {
        errorBox.style.display = 'none';
        document.getElementById('toggleErrors').textContent = 'Show Errors';
      }
    }
  </script>
</body>
</html>