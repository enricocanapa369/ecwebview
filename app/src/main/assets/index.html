<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Frogger Clone</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #111;
      color: white;
      font-family: sans-serif;
      height: 100%;
      overflow: hidden;
    }

    #game {
      display: block;
      width: 100vw;
      height: 60vh;
      background: #222;
    }

    #controls {
      position: absolute;
      bottom: 60px;
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .btn {
      width: 64px;
      height: 64px;
      font-size: 28px;
      border: none;
      border-radius: 12px;
      background: #fff;
      color: #333;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    .dpad {
      display: grid;
      grid-template-columns: 64px 64px 64px;
      grid-template-rows: 64px 64px 64px;
      gap: 10px;
    }

    .dpad button {
      visibility: hidden;
    }

    .dpad button.active {
      visibility: visible;
    }

    #toggleErrors {
      position: absolute;
      bottom: 10px;
      right: 10px;
      font-size: 12px;
      padding: 6px 10px;
      background: white;
      color: black;
      border-radius: 5px;
      z-index: 10;
    }

    #errorBox {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      max-height: 40%;
      overflow-y: auto;
      background: rgba(0, 0, 0, 0.85);
      color: red;
      font-size: 12px;
      display: none;
      padding: 10px;
      box-sizing: border-box;
      white-space: pre-wrap;
      z-index: 9;
    }
  </style>
</head>
<body>
  <canvas id="game"></canvas>

  <div id="controls">
    <div class="dpad">
      <button></button>
      <button class="btn active" onclick="move('up')">⬆️</button>
      <button></button>
      <button class="btn active" onclick="move('left')">⬅️</button>
      <button></button>
      <button class="btn active" onclick="move('right')">➡️</button>
      <button></button>
      <button class="btn active" onclick="move('down')">⬇️</button>
      <button></button>
    </div>
  </div>

  <button id="toggleErrors" onclick="toggleErrorBox()">Show Errors</button>
  <div id="errorBox"></div>

  <script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight * 0.6;
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    let player = { x: 140, y: canvas.height - 40, size: 20 };
    let cars = Array.from({ length: 5 }, (_, i) => ({
      x: Math.random() * canvas.width,
      y: i * 60 + 40,
      w: 40,
      h: 20,
      speed: 2 + Math.random() * 2
    }));

    function move(dir) {
      const s = 20;
      if (dir === 'up') player.y -= s;
      if (dir === 'down') player.y += s;
      if (dir === 'left') player.x -= s;
      if (dir === 'right') player.x += s;
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = 'lime';
      ctx.fillRect(player.x, player.y, player.size, player.size);

      ctx.fillStyle = 'red';
      for (let car of cars) {
        car.x += car.speed;
        if (car.x > canvas.width) car.x = -car.w;
        ctx.fillRect(car.x, car.y, car.w, car.h);

        if (
          player.x < car.x + car.w &&
          player.x + player.size > car.x &&
          player.y < car.y + car.h &&
          player.y + player.size > car.y
        ) {
          player.y = canvas.height - 40; // Reset on hit
        }
      }

      requestAnimationFrame(draw);
    }

    draw();

    // Error capture
    let errorLogs = [];
    const errorBox = document.getElementById('errorBox');

    function logError(msg) {
      errorLogs.push(msg);
      if (errorBox.style.display !== 'none') {
        errorBox.textContent = errorLogs.join('\n');
      }
    }

    window.onerror = function (msg, url, lineNo, columnNo, error) {
      logError(`[${lineNo}:${columnNo}] ${msg}`);
    };

    const originalConsoleError = console.error;
    console.error = function (...args) {
      logError(args.join(' '));
      originalConsoleError.apply(console, args);
    };

    function toggleErrorBox() {
      if (errorBox.style.display === 'none') {
        errorBox.style.display = 'block';
        errorBox.textContent = errorLogs.join('\n') || 'No errors';
        document.getElementById('toggleErrors').textContent = 'Hide Errors';
      } else {
        errorBox.style.display = 'none';
        document.getElementById('toggleErrors').textContent = 'Show Errors';
      }
    }
  </script>
</body>
</html>